import{a as t}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-X7CKS3TL.js";import{a as r,b as f,c as h,d as m}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-KJO4TGJR.js";import{a as n}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-3A2JFEYA.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-7SGSM22N.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-R6LNIICI.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-JAOWUWZV.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-M4HYNYPR.js";import{a as e,b as w}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-IZONHGZF.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-PL7ABX2I.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-4EIS7BYS.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-J4GEMR4C.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-QNGB2B7Y.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-BCSKBOTJ.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-AVU3O3A3.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-XPGMHGTV.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-ULVBXWJB.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-LMAJFMD3.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-BVIH2UGL.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-6XDN3DBH.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-ALPY2KEI.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-4IXHYMTJ.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-N5B75T5C.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-3KRTWZVS.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-R4HFD3XW.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-XU363OGR.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-YU6U5GVC.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-YCDY2MOI.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-42T2S72B.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-2CDGO4JD.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-ARS6ZOOH.js";import{a as p}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-UJDADLX2.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-XIVOHRGP.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-3KWPSLFK.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-X55EUBSV.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-PPLKGJWU.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-6EJ6POVP.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-IFSG4W4N.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-HNMWL5VI.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-MIC544N2.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-PM3MPBFM.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-LRUDMK45.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-436X52LU.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-AGWT4SHS.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-7U5OSRI4.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-QO3IW7EG.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-SXRVX7TP.js";import{d as o,f as u}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-7KIOWWLZ.js";import{a as g}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-AWZQWCMD.js";import{b as c}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-BS6HJK3Z.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-GBSL67OG.js";import"https://st-p.rmcdn1.net/2cde20db/dist/c/c-CAENMAS7.js";import{d as i}from"https://st-p.rmcdn1.net/2cde20db/dist/c/c-F2U6PKQI.js";var l=i(g()),s=i(c()),a=i(p());f();w();m();u();var v=t.extend({render:function(){return this.rendered=!0,this.template=n["template-viewer-widget-background"],this.setElement(this.template({data:this})),this.$el.prependTo(this.page.$fixedBgContainer),this.$picture=this.$(".picture-background"),this.$video=this.$(".video-background"),this.$videoContainer=this.$(".video-container"),this.$slideshow=this.$(".slideshow-container"),this.$slideshowPreload=this.$(".slideshow-preload"),this.picture&&this.selectedType==="picture"?this.renderPicture():!s.default.isEmpty(this.video)&&this.selectedType==="video"?this.renderVideo():this.slideshow&&this.selectedType==="slideshow"?this.renderSlideshow():(o("viewer.paintGlassToolbar")&&Modernizr.mobilesafari26&&window.CSS?.supports?.("background-color",`#${this.color}`)&&(this.page.$el.css("background-color",`#${this.color}`),this.page.$el.find(".page-fixed-bg-container").addClass("hidden"),this.page.$el.find(".content-scroll-wrapper").addClass("unshifted")),this.widgetIsLoaded()),this},start:function(){return this.started=!0,this.selectedType==="video"&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.start(),this.selectedType==="slideshow"&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&!this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.startAnimationLoop(),this},stop:function(){return this.started=!1,this.selectedType==="video"&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.stop(),this.selectedType==="slideshow"&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.stopAnimationLoop(),this},destroy:function(){return this.selectedType==="video"&&(this.videoWidget&&this.videoWidget.destroy(),this.videoWidget=null),this.selectedType==="slideshow"&&(this.slideshowWidget&&this.slideshowWidget.destroy(),this.slideshowWidget=null),t.prototype.destroy.apply(this,arguments)},hasVideoBG:function(){return!!(!RM.screenshot&&this.selectedType==="video"&&this.video&&this.video.url)},renderPicture:function(){if(!this.picture){this.widgetIsLoaded();return}let d=e.useLambdaUrl(this.picture)||e.useLambdaUrlOldProjects(this.picture,"background")?e.getLambdaUrl(this.picture):this.picture.finalUrl||this.picture.effectUrl||this.picture.unscaledOptimizedUrl||this.picture.url;(0,l.default)("<img/>").on("load",s.default.bind(function(){this.$picture.css({"background-image":"url("+d+")"}),RM.screenshot?setTimeout(this.widgetIsLoaded,200):this.widgetIsLoaded()},this)).on("error",this.widgetIsLoaded).attr("src",d)},renderSlideshow:function(){this.slideshowWidget=new r({data:this.slideshow,container:this.$slideshow,preloadContainer:this.$slideshowPreload,name:this.page.cid}),RM.screenshot?(this.slideshowWidget.render(),this.slideshowWidget.on("loaded",function(){this.widgetIsLoaded()}.bind(this))):(this.slideshowWidget.render(!this.page.isCurrent()),this.widgetIsLoaded())},renderVideo:function(){this.videoWidget=new h({el:this.$videoContainer.get(0),model:new a.default.Model({video:this.video}),attributes:{thumbnailMode:window.RM.screenshot}}),this.videoWidget.on("loaded",()=>{this.widgetIsLoaded()}),this.videoWidget.on("playStarted",()=>{this.trigger("videoBGStarted")}),this.videoWidget.render()}}),M=v;export{M as default};
